/*
 * Heavily modified from BBB DTS, which was:
 * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */
/dts-v1/;

#include "am33xx.dtsi"
#include "am335x-bone-common.dtsi"
#include "am335x-io2200-gpio.dtsi"
#include "am335x-io2200-nor.dtsi"
#include "am335x-io2200-nand.dtsi"
#include "am335x-genepi.dtsi"

&vmmcsd_fixed {
	status = "okay";
};
&mmc1 {
	vmmc-supply = <&vmmcsd_fixed>;
	pinctrl-names = "default";
	pinctrl-0 = <&mmc0_pins_default>;
	bus-width = <4>;
	status = "okay";
};

&mmc2 {
	vmmc-supply = <&vmmcsd_fixed>;
	pinctrl-names = "default";
	pinctrl-0 = <&emmc_pins>;
	bus-width = <8>;
	status = "disabled";
};

&uart0 {
	status = "disable";
};

&uart1 {
	pinctrl-names = "default";
	status = "okay";
	pinctrl-0 = <&uart1_485_pins_default>;
	rs485-rx-during-tx;
	linux,rs485-enabled-at-boot-time;
	rs485-rts-active-high;
};

&uart4 {
	pinctrl-names = "default";
	pinctrl-0 = <&uart4_dbg_pins_default>;
	status = "okay";
};

&uart5 {
	pinctrl-names = "default";
	pinctrl-0 = <&uart5_psoc_pins_default>;
	status = "okay";
};

&i2c0 {
	status = "okay";
pcf8563: pcf8563@51 {
		 compatible = "nxp,pcf8563";
		 reg = <0x51>;
	 };
};

&i2c1 {
	status = "disabled";
};
&i2c2 {
	status = "disabled";
};
&usb0 {
	status = "okay";
};
&usb0_phy {
	status = "okay";
};
&usb1 {
	status = "disabled";
};
&usb1_phy {
	status = "disabled";
};

&usb {
	status = "okay";
};

&usb_ctrl_mod {
	status = "okay";
};

&cppi41dma  {
	status = "okay";
};

&gpio3 {
	status = "disable";
};

&cpsw_emac0 {
	phy_id = <&davinci_mdio>, <3>;
	phy-mode = "mii";
};

&davinci_mdio {
ksz8873mll:slave@3 {
		   fiber-gpios = <&gpio0 22 GPIO_ACTIVE_HIGH>;
		   reg = <3>;
	   };
};

/ {
	model = "Eaton AM335x Genepi";
	compatible = "ti,am335x-bone-black", "ti,am335x-bone", "ti,am33xx", "eaton,am335x_genepi";
	chosen {
		stdout-path = &uart4;
		tick-timer = &timer2;
	};
	ocp {
uart0: serial@44e09000 {
	       compatible = "ti,am3352-uart";
       };
uart1: serial@48022000 {
	       compatible = "ti,am3352-uart";
       };
uart2: serial@48024000 {
	       compatible = "ti,am3352-uart";
       };
uart3: serial@481a6000 {
	       compatible = "ti,am3352-uart";
       };
uart4: serial@481a8000 {
	       compatible = "ti,am3352-uart";
       };
uart5: serial@481aa000 {
	       compatible = "ti,am3352-uart";
       };
rtc: rtc@44e3e000 {
	     status = "disabled";
     };
     pps {
	     compatible = "pps-gpio";
	     pinctrl-names = "default";
	     pinctrl-0 = <&gpio1_pins_default>;
	     gpios = <&gpio1 23 GPIO_ACTIVE_HIGH>;
	     assert-rising-edge;
	     status = "okay";
     };
	};
};

